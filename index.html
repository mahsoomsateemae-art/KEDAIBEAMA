<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rusmani TOMYAM - Restaurant Ordering System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        :root {
            --primary: #ff6b35;
            --secondary: #2f4858;
            --accent: #00c853;
            --light: #f8f9fa;
            --dark: #343a40;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .table-number {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
        }
        .main-content {
            display: flex;
            margin-top: 20px;
            gap: 20px;
        }
        .categories {
            flex: 0 0 200px;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }
        .categories h2 {
            margin-bottom: 15px;
            color: var(--secondary);
            font-size: 18px;
        }
        .category-item {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .category-item:hover, .category-item.active {
            background-color: var(--primary);
            color: white;
        }
        .menu {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .menu h2 {
            color: var(--secondary);
            margin-bottom: 20px;
        }
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .menu-item {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .menu-item img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            background-color: #f0f0f0;
        }
        .item-details {
            padding: 15px;
        }
        .item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .item-desc {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .item-price {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 10px;
        }
        .add-to-cart {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
        }
        .add-to-cart:hover {
            background-color: #e55a2a;
        }
        .cart {
            flex: 0 0 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }
        .cart h2 {
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .quantity-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
        }
        .remove-item {
            color: var(--danger);
            background: none;
            border: none;
            cursor: pointer;
        }
        .cart-total {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }
        .checkout-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .checkout-btn:hover {
            background-color: #009b3a;
        }
        .order-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--accent);
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 1000;
        }
        /* Table Selection */
        .table-selection {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .table-selection h2 {
            color: var(--secondary);
            margin-bottom: 15px;
        }
        .tables-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
        }
        .table-btn {
            padding: 15px 10px;
            border: 2px solid var(--secondary);
            border-radius: 10px;
            background: white;
            color: var(--secondary);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .table-btn.selected {
            background: var(--secondary);
            color: white;
        }
        .table-btn.occupied {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }
        .admin-link {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        .admin-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
            }
            .categories {
                flex: 0 0 auto;
                margin-bottom: 20px;
            }
            .tables-grid {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-utensils"></i>
                    <span>Rusmani TOMYAM SEA FOOD</span>
                </div>
                <div class="table-number" id="tableNumberDisplay">No Table Selected</div>
            </div>
        </div>
    </header>
    <div class="container">
        <!-- Customer View -->
        <div class="customer-view" id="customerView">
            <div class="table-selection">
                <h2>Select Your Table</h2>
                <div class="tables-grid" id="tablesGrid">
                    <!-- Tables will be populated by JavaScript -->
                </div>
            </div>
            <div class="main-content">
                <div class="categories">
                    <h2>Categories</h2>
                    <div class="category-item active" data-category="all">All Items</div>
                    <div class="category-item" data-category="nasi">Nasi Goreng</div>
                    <div class="category-item" data-category="mee">Mee/KueyTeow/Bihun/Maggi</div>
                    <div class="category-item" data-category="terbaru">Menu Terbaru</div>
                    <div class="category-item" data-category="ringan">Makanan Ringan</div>
                    <div class="category-item" data-category="sayur">Sayur</div>
                    <div class="category-item" data-category="telur">Telur</div>
                    <div class="category-item" data-category="tomyam">Tomyam / Sup</div>
                    <div class="category-item" data-category="ikan">Ikan</div>
                    <div class="category-item" data-category="minuman">Minuman</div>
                    <div class="category-item" data-category="menuset">Menu Set</div>
                </div>
                <div class="menu">
                    <h2>Our Menu</h2>
                    <div class="menu-items" id="menuItems">
                        <!-- Menu items will be populated by JavaScript -->
                    </div>
                </div>
                <div class="cart">
                    <h2>Your Order <span class="items-count">(0 items)</span></h2>
                    <div class="cart-items" id="cartItems">
                        <div class="empty-cart">Your cart is empty</div>
                    </div>
                    <div class="cart-total">
                        <span>Total:</span>
                        <span class="total-amount">RM0.00</span>
                    </div>
                    <button class="checkout-btn" id="checkoutBtn">Place Order</button>
                </div>
            </div>
        </div>
    </div>
    <div class="order-notification" id="orderNotification">Order successfully sent to the kitchen!</div>
    <script>
        // Sample menu data for Rusmani TOMYAM SEA FOOD
        let menuItems = [
            {
                id: 1,
                name: "Nasi Goreng Kampung",
                description: "Traditional village-style fried rice with anchovies and vegetables",
                price: 8.50,
                category: "nasi",
                image: "https://images.unsplash.com/photo-1633896949678-1b4f11d6f7ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 2,
                name: "Mee Goreng Mamak",
                description: "Spicy Indian-style fried noodles with vegetables and tofu",
                price: 9.00,
                category: "mee",
                image: "https://images.unsplash.com/photo-1563245372-f21724e3856d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 3,
                name: "Tomyam Seafood",
                description: "Hot and sour soup with fresh seafood and herbs",
                price: 18.99,
                category: "tomyam",
                image: "https://images.unsplash.com/photo-1619894991209-32b8fb1d5ce3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 4,
                name: "Ikan Bakar",
                description: "Grilled fish with spicy sambal sauce",
                price: 22.50,
                category: "ikan",
                image: "https://images.unsplash.com/photo-1612392061787-2d078b3e573e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1074&q=80",
            },
            {
                id: 5,
                name: "Teh Tarik",
                description: "Malaysian pulled milk tea",
                price: 4.50,
                category: "minuman",
                image: "https://images.unsplash.com/photo-1595981267035-7b04ca84a82d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 6,
                name: "Kangkung Belacan",
                description: "Water spinach stir-fried with shrimp paste",
                price: 12.00,
                category: "sayur",
                image: "https://images.unsplash.com/photo-1543362906-acfc16c67564?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 7,
                name: "Telur Dadar",
                description: "Fluffy omelette with onions and chilies",
                price: 7.50,
                category: "telur",
                image: "https://images.unsplash.com/photo-1551782450-a2132b4ba21d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
            {
                id: 8,
                name: "Set Makan Tengahari",
                description: "Lunch set with rice, vegetable, and choice of protein",
                price: 15.90,
                category: "menuset",
                image: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1170&q=80",
            },
        ];

        // Custom table names as requested: D2-21, A1-A5, B1-B4
        const customTableNames = [
            "D2", "D3", "D4", "D5", "D6", "D7", "D8", "D9", "D10", "D11", 
            "D12", "D13", "D14", "D15", "D16", "D17", "D18", "D19", "D20", "D21",
            "A1", "A2", "A3", "A4", "A5",
            "B1", "B2", "B3", "B4"
        ];

        // Create tables data using custom names
        const tables = customTableNames.map((name, index) => ({
            id: index + 1,
            name: name,
            occupied: Math.random() > 0.7, // 30% chance a table is occupied
        }));

        // Cart functionality
        let cart = [];
        let selectedTable = null;

        // DOM elements
        const tableNumberDisplay = document.getElementById("tableNumberDisplay");
        const tablesGrid = document.getElementById("tablesGrid");
        const menuItemsContainer = document.getElementById("menuItems");
        const cartItemsContainer = document.getElementById("cartItems");
        const itemsCountElement = document.querySelector(".items-count");
        const totalAmountElement = document.querySelector(".total-amount");
        const checkoutButton = document.getElementById("checkoutBtn");
        const notification = document.getElementById("orderNotification");

        // Initialize the app
        function init() {
            renderTables();
            renderMenuItems();
            updateCart();
            
            // Add event listeners
            checkoutButton.addEventListener("click", placeOrder);
            
            // Category filtering
            document.querySelectorAll(".category-item").forEach((item) => {
                item.addEventListener("click", (e) => {
                    document.querySelectorAll(".category-item").forEach((i) => i.classList.remove("active"));
                    e.target.classList.add("active");
                    filterMenuItems(e.target.getAttribute("data-category"));
                });
            });
            
            // Simulate WebSocket connection for demo purposes
            simulateWebSocketConnection();
        }

        // Render tables with custom names
        function renderTables() {
            tablesGrid.innerHTML = "";
            tables.forEach((table) => {
                const tableElement = document.createElement("div");
                tableElement.classList.add("table-btn");
                if (table.occupied) {
                    tableElement.classList.add("occupied");
                }
                if (selectedTable === table.id) {
                    tableElement.classList.add("selected");
                }
                tableElement.textContent = table.name;
                tableElement.addEventListener("click", () => selectTable(table.id));
                tablesGrid.appendChild(tableElement);
            });
        }

        // Select table
        function selectTable(tableId) {
            const table = tables.find((t) => t.id === tableId);
            if (table.occupied) {
                alert("This table is currently occupied. Please select another table.");
                return;
            }
            selectedTable = tableId;
            tableNumberDisplay.textContent = `Table ${table.name}`;
            renderTables();
        }

        // Filter menu items by category
        function filterMenuItems(category) {
            const filteredItems = category === "all" 
                ? menuItems 
                : menuItems.filter((item) => item.category === category);
            renderMenuItems(filteredItems);
        }

        // Render menu items
        function renderMenuItems(items = menuItems) {
            menuItemsContainer.innerHTML = "";
            if (items.length === 0) {
                menuItemsContainer.innerHTML = '<div class="empty-menu">No items found in this category</div>';
                return;
            }
            
            items.forEach((item) => {
                const menuItemElement = document.createElement("div");
                menuItemElement.classList.add("menu-item");
                menuItemElement.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\" viewBox=\"0 0 100 100\"><rect width=\"100\" height=\"100\" fill=\"%23ddd\"/><text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"sans-serif\" font-size=\"12\" fill=\"%23666\">${item.name}</text></svg>'">
                    <div class="item-details">
                        <div class="item-title">${item.name}</div>
                        <div class="item-desc">${item.description}</div>
                        <div class="item-price">RM${item.price.toFixed(2)}</div>
                        <button class="add-to-cart" data-id="${item.id}">Add to Cart</button>
                    </div>
                `;
                menuItemsContainer.appendChild(menuItemElement);
            });
            
            // Add event listeners to Add to Cart buttons
            document.querySelectorAll(".add-to-cart").forEach((button) => {
                button.addEventListener("click", (e) => {
                    if (!selectedTable) {
                        alert("Please select a table first");
                        return;
                    }
                    const itemId = parseInt(e.target.getAttribute("data-id"));
                    addToCart(itemId);
                });
            });
        }

        // Add item to cart
        function addToCart(itemId) {
            const item = menuItems.find((i) => i.id === itemId);
            if (!item) return;
            
            const existingItem = cart.find((i) => i.id === itemId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1,
                });
            }
            updateCart();
        }

        // Remove item from cart
        function removeFromCart(itemId) {
            cart = cart.filter((item) => item.id !== itemId);
            updateCart();
        }

        // Update cart quantity
        function updateItemQuantity(itemId, change) {
            const item = cart.find((i) => i.id === itemId);
            if (!item) return;
            
            item.quantity += change;
            if (item.quantity <= 0) {
                removeFromCart(itemId);
            } else {
                updateCart();
            }
        }

        // Update cart UI
        function updateCart() {
            // Update items count
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            itemsCountElement.textContent = `(${totalItems} items)`;
            
            // Update cart items
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
            } else {
                cartItemsContainer.innerHTML = "";
                cart.forEach((item) => {
                    const cartItemElement = document.createElement("div");
                    cartItemElement.classList.add("cart-item");
                    cartItemElement.innerHTML = `
                        <div class="item-info">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">RM${item.price.toFixed(2)}</div>
                        </div>
                        <div class="item-controls">
                            <button class="quantity-btn minus" data-id="${item.id}">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn plus" data-id="${item.id}">+</button>
                            <button class="remove-item" data-id="${item.id}">×</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemElement);
                });
                
                // Add event listeners to quantity buttons
                document.querySelectorAll(".quantity-btn.minus").forEach((button) => {
                    button.addEventListener("click", (e) => {
                        const itemId = parseInt(e.target.getAttribute("data-id"));
                        updateItemQuantity(itemId, -1);
                    });
                });
                
                document.querySelectorAll(".quantity-btn.plus").forEach((button) => {
                    button.addEventListener("click", (e) => {
                        const itemId = parseInt(e.target.getAttribute("data-id"));
                        updateItemQuantity(itemId, 1);
                    });
                });
                
                document.querySelectorAll(".remove-item").forEach((button) => {
                    button.addEventListener("click", (e) => {
                        const itemId = parseInt(e.target.getAttribute("data-id"));
                        removeFromCart(itemId);
                    });
                });
            }
            
            // Update total amount
            const totalAmount = cart.reduce((total, item) => total + item.price * item.quantity, 0);
            totalAmountElement.textContent = `RM${totalAmount.toFixed(2)}`;
        }

        // Place order
        function placeOrder() {
            if (cart.length === 0) {
                alert("Your cart is empty. Please add items before placing an order.");
                return;
            }
            
            if (!selectedTable) {
                alert("Please select a table first.");
                return;
            }
            
            const table = tables.find((t) => t.id === selectedTable);
            const order = {
                table: table.name,
                items: cart,
                timestamp: new Date().toISOString(),
                status: "pending",
            };
            
            // In a real application, this would be sent via WebSockets to the seller's device
            sendOrderToSeller(order);
            
            // Mark table as occupied
            table.occupied = true;
            
            // Show confirmation
            notification.style.display = "block";
            setTimeout(() => {
                notification.style.display = "none";
            }, 3000);
            
            // Clear cart and reset table selection
            cart = [];
            selectedTable = null;
            tableNumberDisplay.textContent = "No Table Selected";
            updateCart();
            renderTables();
        }

        // Simulate sending order to seller (WebSocket simulation)
        function sendOrderToSeller(order) {
            console.log("Order sent to seller:", order);
            // In a real application, this would use WebSockets to send the order data
        }

        // Simulate WebSocket connection for demo purposes
        function simulateWebSocketConnection() {
            console.log("WebSocket connection established with server");
            // In a real application, this would establish a connection with the server
        }

        // Initialize the app when the DOM is loaded
        document.addEventListener("DOMContentLoaded", init);
    </script>
</body>
</html>
